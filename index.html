<!DOCTYPE html>
<html lang="de">
<link rel="stylesheet" href="style.css">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV-Programm - Deutsche Sender</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì∫ TV-Programm</h1>
            <div class="current-time" id="currentTime"></div>
            <button class="refresh-btn" onclick="loadTVProgram()">üîÑ Aktualisieren</button>
        </div>
        
        <div class="controls">
            <!-- Suchleiste -->
            <div class="search-section">
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput" 
                    placeholder="üîç Sender durchsuchen..."
                    oninput="filterChannels()"
                >
            </div>
            
            <!-- Multiselect Searchbar -->
            <div class="search-section">
                <label for="channelMultiSelect" class="multiselect-title">Sender ausw√§hlen:</label>
                <select id="channelMultiSelect" class="search-input" multiple size="8" onchange="multiSelectChannels()">
                    <!-- Options will be filled by JS -->
                </select>
            </div>
        </div>
        
        <div id="loading" class="loading">
            Lade TV-Programmdaten...
        </div>
        
        <!-- Tabellen Container -->
        <div class="tables-container" id="tablesContainer" style="display: none;">
            <!-- Jetzt laufende Programme -->
            <div class="table-section">
                <div class="table-title now">üî¥ L√§uft jetzt</div>
                <div id="nowTable">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>
            
            <!-- 20:15 Programme -->
            <div class="table-section">
                <div class="table-title primetime">‚≠ê Um 20:15 Uhr</div>
                <div id="primetimeTable">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
    <script>
    // Fill multiselect with channels
    function fillChannelMultiSelect() {
        const select = document.getElementById('channelMultiSelect');
        select.innerHTML = '';
        germanChannels.forEach(ch => {
            const option = document.createElement('option');
            option.value = ch.id;
            option.textContent = ch.name;
            select.appendChild(option);
        });
    }

    // Handle selection
    function multiSelectChannels() {
        const select = document.getElementById('channelMultiSelect');
        selectedChannels = new Set(Array.from(select.selectedOptions).map(opt => opt.value));
        updateTables();
    }

    // Replace old grid with new multiselect
    window.addEventListener('DOMContentLoaded', () => {
        fillChannelMultiSelect();
    });
    </script>
</body>
</html>